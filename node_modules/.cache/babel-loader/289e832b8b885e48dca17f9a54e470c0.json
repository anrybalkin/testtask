{"ast":null,"code":"/**\n * func what validate email\n * @param {string} Email text\n * @returns \n */\nexport function validateEmail(Email) {\n  return Email.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/) != null;\n}\n/**\n * func what validate name\n * @param {string} text  name\n * @returns \n */\n\nexport function validateName(text) {\n  return text.length >= 2 && text.length <= 60;\n}\n/**\n * func what validate position id \n * @param {Int16Array} id  position id \n * @returns \n */\n\nexport function validateId(id) {\n  return id < 10 && id > 0;\n}\n/**\n * func what get dimention from file\n * @param {URL} uri file\n * @returns \n */\n\nconst getDimention = uri => new Promise(resolve => {\n  const img = new Image();\n\n  img.onload = () => {\n    resolve({\n      height: img.height,\n      width: img.width\n    });\n  };\n\n  img.src = uri;\n});\n/**\n * func what validate img \n * @param {File} file file\n * @returns \n */\n\n\nexport async function validationImg(file) {\n  const fileAsDataURL = window.URL.createObjectURL(file);\n  const propertis = await getDimention(fileAsDataURL);\n  let size = file.size / 10000000 < 5;\n  let status = {\n    valid: false,\n    error: []\n  };\n\n  if (!size) {\n    status.error.push(\"Size file is too big, img must be up to 5 Mb\");\n  }\n\n  if (propertis.height < 70 && propertis.width < 70) {\n    status.error.push(\"Too low dimention, img should be 70x70 or larger\");\n  }\n\n  status.valid = size == true && propertis.height >= 70 && propertis.width >= 70;\n  return status;\n}\n/**\n * func what validate form\n * @param {FormData} fromdata fromdata\n * @param {Object} keys object with key for set error\n * @returns \n */\n\nexport async function validateForm(fromdata, keys) {\n  if (keys == undefined) {\n    return {\n      succeed: false,\n      error: \"No data keys\"\n    };\n  }\n\n  if (fromdata == null) {\n    return {\n      succeed: false,\n      error: \"No data\"\n    };\n  }\n\n  let photo = false;\n\n  if (keys.photo != undefined && fromdata.get(keys.photo).size != 0) {\n    photo = await validationImg(fromdata.get(\"photo\"));\n  }\n\n  const name = validateName(fromdata.get(keys.name));\n  const email = validateEmail(fromdata.get(keys.email));\n  const role = fromdata.get(keys.position_id) !== null ? validateId(fromdata.get(keys.position_id)) : false;\n  const phone = fromdata.get(\"phone\").match(/^[\\+]{0,1}380([0-9]{9})$/) != null;\n\n  if (!role) {\n    document.querySelector(\".registration_fieldset .input_error\").classList.remove(\"hide\");\n    document.querySelector(\".registration_fieldset .input_error\").innerText = \"Please select position\";\n    document.querySelector(\".registration_fieldset\").classList.add(\"error\");\n  }\n\n  if (!name) {\n    document.querySelector(\".input[name='\" + keys.name + \"'] ~ .input_error\").classList.remove(\"hide\");\n    document.querySelector(\".input[name='\" + keys.name + \"'] ~ .input_error\").innerText = \"Please fill field name\";\n    document.querySelector(\".input[name='\" + keys.name + \"']\").classList.add(\"error\");\n  }\n\n  if (!email) {\n    document.querySelector(\".input[name='\" + keys.email + \"'] ~ .input_error\").classList.remove(\"hide\");\n    document.querySelector(\".input[name='\" + keys.email + \"'] ~ .input_error\").innerText = \"Please fill field email\";\n    document.querySelector(\".input[name='\" + keys.email + \"']\").classList.add(\"error\");\n  }\n\n  if (!photo) {\n    document.querySelector(\".file_error\").classList.remove(\"hide\");\n    document.querySelector(\".file_error\").innerText = \"Please choose file\";\n    document.querySelector(\".file_input\").classList.add(\"error\");\n  }\n\n  if (!phone) {\n    document.querySelector(\".input[name='\" + keys.phone + \"'] ~ .input_error\").classList.remove(\"hide\");\n    document.querySelector(\".input[name='\" + keys.phone + \"'] ~ .input_helper\").classList.add(\"hide\");\n    document.querySelector(\".input[name='\" + keys.phone + \"'] ~ .input_error\").innerText = \"Please fill field phone\";\n    document.querySelector(\".input[name='\" + keys.phone + \"']\").classList.add(\"error\");\n  }\n\n  return {\n    succeed: phone && name && email && role && photo && true,\n    detail: {\n      photo: photo,\n      name: name,\n      email: email,\n      role: role,\n      phone: phone\n    }\n  };\n}","map":{"version":3,"names":["validateEmail","Email","match","validateName","text","length","validateId","id","getDimention","uri","Promise","resolve","img","Image","onload","height","width","src","validationImg","file","fileAsDataURL","window","URL","createObjectURL","propertis","size","status","valid","error","push","validateForm","fromdata","keys","undefined","succeed","photo","get","name","email","role","position_id","phone","document","querySelector","classList","remove","innerText","add","detail"],"sources":["/Users/antonrybalkin/Projects/testtask/src/components/validate.js"],"sourcesContent":["/**\n * func what validate email\n * @param {string} Email text\n * @returns \n */\nexport function validateEmail(Email) {\n    return Email.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/) != null\n}\n/**\n * func what validate name\n * @param {string} text  name\n * @returns \n */\nexport function validateName(text) {\n    return text.length >= 2 && text.length <= 60\n}\n/**\n * func what validate position id \n * @param {Int16Array} id  position id \n * @returns \n */\nexport function validateId(id) {\n    return id < 10&&id > 0\n}\n/**\n * func what get dimention from file\n * @param {URL} uri file\n * @returns \n */\nconst getDimention = uri => new Promise(resolve => {\n    const img = new Image()\n    img.onload = () => {\n        resolve({height: img.height, width: img.width})\n    }\n    img.src = uri\n})\n/**\n * func what validate img \n * @param {File} file file\n * @returns \n */\nexport async function validationImg(file) {\n    const fileAsDataURL = window\n        .URL\n        .createObjectURL(file);\n    const propertis = await getDimention(fileAsDataURL);\n    let size = file.size / 10000000 < 5;\n    let status = {\n        valid: false,\n        error: []\n    }\n    if (!size) {\n        status\n            .error\n            .push(\"Size file is too big, img must be up to 5 Mb\")\n    }\n\n    if (propertis.height < 70 && propertis.width < 70) {\n        status\n            .error\n            .push(\"Too low dimention, img should be 70x70 or larger\")\n    }\n\n    status.valid = size == true && propertis.height >= 70 && propertis.width >= 70\n\n    return status;\n\n}\n/**\n * func what validate form\n * @param {FormData} fromdata fromdata\n * @param {Object} keys object with key for set error\n * @returns \n */\nexport async function validateForm(fromdata, keys) {\n\n    if (keys == undefined) {\n        return {succeed: false, error: \"No data keys\"}\n    }\n    if (fromdata == null) {\n        return {succeed: false, error: \"No data\"}\n    }\n\n    let photo = false;\n    if (keys.photo != undefined && fromdata.get(keys.photo).size != 0) {\n        photo = await validationImg(fromdata.get(\"photo\"));\n    }\n    const name = validateName(fromdata.get(keys.name));\n    const email = validateEmail(fromdata.get(keys.email));\n    const role = fromdata.get(keys.position_id) !== null\n        ? validateId(fromdata.get(keys.position_id))\n        : false;\n    const phone = fromdata\n        .get(\"phone\")\n        .match(/^[\\+]{0,1}380([0-9]{9})$/) != null;\n\n    if (!role) {\n        document\n            .querySelector(\".registration_fieldset .input_error\")\n            .classList\n            .remove(\"hide\");\n        document\n            .querySelector(\".registration_fieldset .input_error\")\n            .innerText = \"Please select position\"\n        document\n            .querySelector(\".registration_fieldset\")\n            .classList\n            .add(\"error\")\n    }\n    if (!name) {\n        document\n            .querySelector(\".input[name='\" + keys.name + \"'] ~ .input_error\")\n            .classList\n            .remove(\"hide\");\n        document\n            .querySelector(\".input[name='\" + keys.name + \"'] ~ .input_error\")\n            .innerText = \"Please fill field name\"\n        document\n            .querySelector(\".input[name='\" + keys.name + \"']\")\n            .classList\n            .add(\"error\")\n    }\n    if (!email) {\n        document\n            .querySelector(\".input[name='\" + keys.email + \"'] ~ .input_error\")\n            .classList\n            .remove(\"hide\");\n        document\n            .querySelector(\".input[name='\" + keys.email + \"'] ~ .input_error\")\n            .innerText = \"Please fill field email\"\n        document\n            .querySelector(\".input[name='\" + keys.email + \"']\")\n            .classList\n            .add(\"error\")\n    }\n    if (!photo) {\n        document\n            .querySelector(\".file_error\")\n            .classList\n            .remove(\"hide\");\n        document\n            .querySelector(\".file_error\")\n            .innerText = \"Please choose file\"\n        document\n            .querySelector(\".file_input\")\n            .classList\n            .add(\"error\")\n    }\n    if (!phone) {\n        document\n            .querySelector(\".input[name='\" + keys.phone + \"'] ~ .input_error\")\n            .classList\n            .remove(\"hide\");\n        document\n            .querySelector(\".input[name='\" + keys.phone + \"'] ~ .input_helper\")\n            .classList\n            .add(\"hide\");\n        document\n            .querySelector(\".input[name='\" + keys.phone + \"'] ~ .input_error\")\n            .innerText = \"Please fill field phone\"\n        document\n            .querySelector(\".input[name='\" + keys.phone + \"']\")\n            .classList\n            .add(\"error\")\n    }\n\n    return {\n        succeed: phone && name && email && role && photo && true,\n        detail: {\n            photo: photo,\n            name: name,\n            email: email,\n            role: role,\n            phone: phone\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}