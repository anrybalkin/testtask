{"ast":null,"code":"var _jsxFileName = \"/Users/antonrybalkin/Projects/testtask/src/components/ComponentFileLoader.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from \"react\";\n/**\n * Component FileLoader who render file input\n * @param {*} props \n * @returns \n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ComponentFileLoader = props => {\n  _s();\n\n  const [name, setName] = useState(props.placeholer);\n  const [error, setError] = useState([]);\n  let filename = useRef();\n  let input = useRef();\n\n  async function handlerChange(e) {\n    e.preventDefault();\n    let status = await props.validator(e.target.files[0]);\n\n    if (status.valid) {\n      filename.current.innerText = e.target.files[0].name.length > 20 ? e.target.files[0].name.substring(0, 20) + \"...\" : e.target.files[0].name;\n      setName(filename.current.innerText);\n      filename.current.classList.remove(\"error\");\n      document.querySelector(\".file_error\").classList.add(\"hide\");\n      setError(status.error);\n    } else {\n      filename.current.classList.add(\"error\");\n      document.querySelector(\".file_error\").classList.remove(\"hide\");\n      setError(status.error);\n      input.current.value = \"\";\n    }\n  }\n\n  if (props.reqired) {\n    return /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"file_block\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: input,\n        type: \"file\",\n        onChange: handlerChange,\n        required: true,\n        className: \"hide\",\n        name: props.name,\n        accept: \"image/jpeg, image/jpg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        ref: filename,\n        className: \"file_input\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"file_error hide\",\n        children: error.length != 0 ? error.map(el => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: el\n          }, el[0], false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 28\n          }, this);\n        }) : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"fileblock\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: input,\n        type: \"file\",\n        className: \"hide\",\n        onChange: handlerChange,\n        name: props.name,\n        accept: \"image/jpeg, image/jpg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        ref: filename,\n        className: \"file_input\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"file_error hide\",\n        children: error.length != 0 ? error.map(el => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: el\n          }, el[0], false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 28\n          }, this);\n        }) : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(ComponentFileLoader, \"c8qoREbfcq50PjaQJI1bAgTyGZE=\");\n\n_c = ComponentFileLoader;\nexport default ComponentFileLoader;\n\nvar _c;\n\n$RefreshReg$(_c, \"ComponentFileLoader\");","map":{"version":3,"names":["React","useRef","useState","ComponentFileLoader","props","name","setName","placeholer","error","setError","filename","input","handlerChange","e","preventDefault","status","validator","target","files","valid","current","innerText","length","substring","classList","remove","document","querySelector","add","value","reqired","map","el"],"sources":["/Users/antonrybalkin/Projects/testtask/src/components/ComponentFileLoader.js"],"sourcesContent":["import React, {useRef, useState} from \"react\";\n/**\n * Component FileLoader who render file input\n * @param {*} props \n * @returns \n */\nconst ComponentFileLoader = (props) => {\n    const [name,\n        setName] = useState(props.placeholer);\n    const [error,\n        setError] = useState([]);\n    let filename = useRef();\n    let input = useRef();\n\n    async function handlerChange(e) {\n        e.preventDefault();\n        let status = await props.validator(e.target.files[0])\n        if (status.valid) {\n            filename.current.innerText = e.target.files[0].name.length > 20\n                ? e\n                    .target\n                    .files[0]\n                    .name\n                    .substring(0, 20) + \"...\"\n                : e.target.files[0].name;\n            setName(filename.current.innerText);\n            filename.current.classList.remove(\"error\")\n            document.querySelector(\".file_error\").classList.add(\"hide\")\n            setError(status.error)\n\n        } else {\n            filename.current.classList.add(\"error\");\n            document.querySelector(\".file_error\").classList.remove(\"hide\")\n            setError(status.error)\n            input.current.value=\"\";\n        }\n    }\n\n    if (props.reqired) {\n        return (\n\n            <label className={\"file_block\"}>\n                <input\n                    ref={input}\n                    type=\"file\"\n                    onChange={handlerChange}\n                    required\n                    className={\"hide\"}\n                    name={props.name}\n                    accept=\"image/jpeg, image/jpg\"\n                    />\n                <span ref={filename} className={\"file_input\"}>{name}</span>\n                <span className={\"file_error hide\"}>{error.length!=0?error.map(el=>{\n                    return <div key={el[0]}>{el}</div>\n                }):\"\"}</span>\n            </label>\n\n        )\n    } else {\n        return (\n            <label className={\"fileblock\"}>\n                <input\n                    ref={input}\n                    type=\"file\"\n                    className={\"hide\"}\n                    onChange={handlerChange}\n                    name={props.name}\n                    accept=\"image/jpeg, image/jpg\"/>\n                <span ref={filename} className={\"file_input\"}>{name}</span>\n                <span className={\"file_error hide\"}>{error.length!=0?error.map(el=>{\n                    return <div key={el[0]}>{el}</div>\n                }):\"\"}</span>\n            </label>\n        )\n    }\n}\nexport default ComponentFileLoader;"],"mappings":"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"},"metadata":{},"sourceType":"module"}