{"ast":null,"code":"import _regeneratorRuntime from\"/Users/antonrybalkin/Projects/testtask/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/antonrybalkin/Projects/testtask/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/antonrybalkin/Projects/testtask/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";/**\n * Component FileLoader who render file input\n * @param {*} props \n * @returns \n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ComponentFileLoader=function ComponentFileLoader(props){var _useState=useState(props.placeholer),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var filename=useRef();var input=useRef();function handlerChange(_x){return _handlerChange.apply(this,arguments);}function _handlerChange(){_handlerChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return props.validator(e.target.files[0]);case 3:status=_context.sent;if(status.valid){filename.current.innerText=e.target.files[0].name.length>20?e.target.files[0].name.substring(0,20)+\"...\":e.target.files[0].name;setName(filename.current.innerText);filename.current.classList.remove(\"error\");document.querySelector(\".file_error\").classList.add(\"hide\");setError(status.error);}else{filename.current.classList.add(\"error\");document.querySelector(\".file_error\").classList.remove(\"hide\");setError(status.error);input.current.value=\"\";}case 5:case\"end\":return _context.stop();}}},_callee);}));return _handlerChange.apply(this,arguments);}if(props.reqired){return/*#__PURE__*/_jsxs(\"label\",{className:\"file_block\",children:[/*#__PURE__*/_jsx(\"input\",{ref:input,type:\"file\",onChange:handlerChange,required:true,className:\"hide\",name:props.name,accept:\"image/jpeg, image/jpg\"}),/*#__PURE__*/_jsx(\"span\",{ref:filename,className:\"file_input\",children:name}),/*#__PURE__*/_jsx(\"span\",{className:\"file_error hide\",children:error.length!=0?error.map(function(el){return/*#__PURE__*/_jsx(\"div\",{children:el},el[0]);}):\"\"})]});}else{return/*#__PURE__*/_jsxs(\"label\",{className:\"fileblock\",children:[/*#__PURE__*/_jsx(\"input\",{ref:input,type:\"file\",className:\"hide\",onChange:handlerChange,name:props.name,accept:\"image/jpeg, image/jpg\"}),/*#__PURE__*/_jsx(\"span\",{ref:filename,className:\"file_input\",children:name}),/*#__PURE__*/_jsx(\"span\",{className:\"file_error hide\",children:error.length!=0?error.map(function(el){return/*#__PURE__*/_jsx(\"div\",{children:el},el[0]);}):\"\"})]});}};export default ComponentFileLoader;","map":{"version":3,"names":["React","useRef","useState","ComponentFileLoader","props","placeholer","name","setName","error","setError","filename","input","handlerChange","e","preventDefault","validator","target","files","status","valid","current","innerText","length","substring","classList","remove","document","querySelector","add","value","reqired","map","el"],"sources":["/Users/antonrybalkin/Projects/testtask/src/components/ComponentFileLoader.js"],"sourcesContent":["import React, {useRef, useState} from \"react\";\n/**\n * Component FileLoader who render file input\n * @param {*} props \n * @returns \n */\nconst ComponentFileLoader = (props) => {\n    const [name,\n        setName] = useState(props.placeholer);\n    const [error,\n        setError] = useState([]);\n    let filename = useRef();\n    let input = useRef();\n\n    async function handlerChange(e) {\n        e.preventDefault();\n        let status = await props.validator(e.target.files[0])\n        if (status.valid) {\n            filename.current.innerText = e.target.files[0].name.length > 20\n                ? e\n                    .target\n                    .files[0]\n                    .name\n                    .substring(0, 20) + \"...\"\n                : e.target.files[0].name;\n            setName(filename.current.innerText);\n            filename.current.classList.remove(\"error\")\n            document.querySelector(\".file_error\").classList.add(\"hide\")\n            setError(status.error)\n\n        } else {\n            filename.current.classList.add(\"error\");\n            document.querySelector(\".file_error\").classList.remove(\"hide\")\n            setError(status.error)\n            input.current.value=\"\";\n        }\n    }\n\n    if (props.reqired) {\n        return (\n\n            <label className={\"file_block\"}>\n                <input\n                    ref={input}\n                    type=\"file\"\n                    onChange={handlerChange}\n                    required\n                    className={\"hide\"}\n                    name={props.name}\n                    accept=\"image/jpeg, image/jpg\"\n                    />\n                <span ref={filename} className={\"file_input\"}>{name}</span>\n                <span className={\"file_error hide\"}>{error.length!=0?error.map(el=>{\n                    return <div key={el[0]}>{el}</div>\n                }):\"\"}</span>\n            </label>\n\n        )\n    } else {\n        return (\n            <label className={\"fileblock\"}>\n                <input\n                    ref={input}\n                    type=\"file\"\n                    className={\"hide\"}\n                    onChange={handlerChange}\n                    name={props.name}\n                    accept=\"image/jpeg, image/jpg\"/>\n                <span ref={filename} className={\"file_input\"}>{name}</span>\n                <span className={\"file_error hide\"}>{error.length!=0?error.map(el=>{\n                    return <div key={el[0]}>{el}</div>\n                }):\"\"}</span>\n            </label>\n        )\n    }\n}\nexport default ComponentFileLoader;"],"mappings":"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"},"metadata":{},"sourceType":"module"}