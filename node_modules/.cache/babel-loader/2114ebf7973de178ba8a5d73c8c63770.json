{"ast":null,"code":"var _jsxFileName = \"/Users/antonrybalkin/Projects/testtask/src/components/ComponentUsers.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState, useContext } from 'react';\nimport UserCard from './ComponentUser';\nimport Button from './ComponentButtton';\nimport { LocalContext } from './Context';\nimport ComponentPreloader from \"./ComponentPreloader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Users = props => {\n  _s();\n\n  const [users, setUsers] = useState(null);\n  const [page, setPage] = useState(1);\n  const [pages, setPages] = useState(null);\n  let btn = useRef();\n  const {\n    re_render,\n    setRe_Render\n  } = useContext(LocalContext);\n  useEffect(() => {\n    if (users == null && (pages == null || pages > page)) {\n      fetch(\"https://frontend-test-assignment-api.abz.agency/api/v1/users?page=\" + page + \"&count=6\").then(response => {\n        return response.json();\n      }).then(data => {\n        setUsers(data.users);\n        setPage(2);\n        setPages(data.total_pages);\n      });\n    }\n\n    if (pages - page == 1) {\n      btn.current.style.display = \"none\";\n    }\n\n    if (re_render) {\n      console.log(re_render);\n      setRe_Render(false);\n      setPage(2);\n      setUsers(\"\");\n      fetch(\"https://frontend-test-assignment-api.abz.agency/api/v1/users?page=\" + 1 + \"&count=6\").then(response => {\n        return response.json();\n      }).then(data => {\n        setUsers(data.users);\n        setPages(data.total_pages);\n      });\n    }\n  });\n\n  function showMore() {\n    fetch(\"https://frontend-test-assignment-api.abz.agency/api/v1/users?page=\" + page + \"&count=6\").then(response => {\n      return response.json();\n    }).then(data => {\n      setUsers(users.concat(data.users));\n      setPage(page + 1);\n    });\n  }\n\n  if (users != null && users != \"\") {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"users\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"users_title\",\n        children: \"Working with GET request\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"users_cards\",\n        children: users.map(el => {\n          return /*#__PURE__*/_jsxDEV(UserCard, {\n            data: el\n          }, el.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 32\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"users_button\",\n        ref: btn,\n        onClick: showMore,\n        children: \"Show more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"users\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"users_title\",\n        children: \"Working with GET request\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"users_cards\",\n        children: /*#__PURE__*/_jsxDEV(ComponentPreloader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"users_button\",\n        ref: btn,\n        onClick: showMore,\n        children: \"Show more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(Users, \"G8AGxz8apRq+HgM23Sz3QOmdctY=\");\n\n_c = Users;\nexport default Users;\n\nvar _c;\n\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useContext","UserCard","Button","LocalContext","ComponentPreloader","Users","props","users","setUsers","page","setPage","pages","setPages","btn","re_render","setRe_Render","fetch","then","response","json","data","total_pages","current","style","display","console","log","showMore","concat","map","el","id"],"sources":["/Users/antonrybalkin/Projects/testtask/src/components/ComponentUsers.js"],"sourcesContent":["import React, {useEffect, useRef, useState,useContext} from 'react';\nimport UserCard from './ComponentUser';\nimport Button from './ComponentButtton';\nimport {LocalContext} from './Context';\nimport ComponentPreloader from \"./ComponentPreloader\";\n\n\nconst Users = (props) => {\n    const [users,\n        setUsers] = useState(null);\n    const [page,\n        setPage] = useState(1);\n    const [pages,\n        setPages] = useState(null);\n    let btn = useRef()\n    const { re_render,setRe_Render } = useContext(LocalContext);\n\n    useEffect(() => {\n        if (users == null && (pages == null || pages > page)) {\n            fetch(\"https://frontend-test-assignment-api.abz.agency/api/v1/users?page=\" + page + \"&count=6\").then(response => {\n                return response.json()\n            }).then(data => {\n                setUsers(data.users);\n                setPage(2)\n                setPages(data.total_pages)\n            })\n        }\n        if (pages - page == 1) {\n            btn.current.style.display = \"none\";\n        }\n        if(re_render)\n        {\n            console.log(re_render)\n            setRe_Render(false);\n            setPage(2);\n            setUsers(\"\");\n            fetch(\"https://frontend-test-assignment-api.abz.agency/api/v1/users?page=\" + 1 + \"&count=6\").then(response => {\n                return response.json()\n            }).then(data => {\n                setUsers(data.users);\n                setPages(data.total_pages)\n                \n            })\n\n        }\n    })\n\n    function showMore() {\n        fetch(\"https://frontend-test-assignment-api.abz.agency/api/v1/users?page=\" + page + \"&count=6\").then(response => {\n            return response.json()\n        }).then(data => {\n            setUsers(users.concat(data.users));\n            setPage(page + 1)\n        })\n    }\n    if (users != null&&users != \"\") {\n        return (\n            <section className={\"users\"}>\n                <h2 className={\"users_title\"}>\n                    Working with GET request\n                </h2>\n                <div className={\"users_cards\"}>\n                    {users.map(el => {\n                        return <UserCard key={el.id} data={el}></UserCard>\n                    })}\n                </div>\n                <Button type={\"users_button\"} ref={btn} onClick={showMore}>Show more</Button>\n            </section>\n        )\n    } else {\n        return(\n            <section className={\"users\"}>\n                    <h2 className={\"users_title\"}>\n                        Working with GET request\n                    </h2>\n                    <div className={\"users_cards\"}>\n                        <ComponentPreloader/>\n                    </div>\n                    <Button type={\"users_button\"} ref={btn} onClick={showMore}>Show more</Button>\n                </section>)\n    }\n\n}\nexport default Users;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}