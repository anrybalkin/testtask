{"ast":null,"code":"import _regeneratorRuntime from\"/Users/antonrybalkin/Projects/testtask/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/antonrybalkin/Projects/testtask/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";/**\n * func what validate email\n * @param {string} Email text\n * @returns {Boolean} status validtion \n */export function validateEmail(Email){return Email.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/)!=null;}/**\n * func what validate name\n * @param {string} text  name\n * @returns {Boolean} status validtion\n */export function validateName(text){return text.length>=2&&text.length<=60;}/**\n * func what validate position id \n * @param {Int16Array} id  position id \n * @returns {Boolean} status validtion\n */export function validateId(id){return id<10&&id>0;}/**\n * func what get dimention from file\n * @param {URL} uri file\n * @returns {Object} with height and width\n */var getDimention=function getDimention(uri){return new Promise(function(resolve){var img=new Image();img.onload=function(){resolve({height:img.height,width:img.width});};img.src=uri;});};/**\n * func what validate img \n * @param {File} file file\n * @returns {Boolean} status\n */export function validationImg(_x){return _validationImg.apply(this,arguments);}/**\n * func what validate form\n * @param {FormData} fromdata fromdata\n * @param {Object} keys object with key for set error\n * @returns {Object} object with status result\n */function _validationImg(){_validationImg=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(file){var fileAsDataURL,propertis,size,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fileAsDataURL=window.URL.createObjectURL(file);_context.next=3;return getDimention(fileAsDataURL);case 3:propertis=_context.sent;size=file.size/10000000<5;status={valid:false,error:[]};if(!size){status.error.push(\"Size file is too big, img must be up to 5 Mb\");}if(propertis.height<70&&propertis.width<70){status.error.push(\"Too low dimention, img should be 70x70 or larger\");}status.valid=size==true&&propertis.height>=70&&propertis.width>=70;return _context.abrupt(\"return\",status);case 10:case\"end\":return _context.stop();}}},_callee);}));return _validationImg.apply(this,arguments);}export function validateForm(_x2,_x3){return _validateForm.apply(this,arguments);}function _validateForm(){_validateForm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(fromdata,keys){var photo,name,email,role,phone;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(keys==undefined)){_context2.next=2;break;}return _context2.abrupt(\"return\",{succeed:false,error:\"No data keys\"});case 2:if(!(fromdata==null)){_context2.next=4;break;}return _context2.abrupt(\"return\",{succeed:false,error:\"No data\"});case 4:photo=false;if(!(keys.photo!=undefined&&fromdata.get(keys.photo).size!=0)){_context2.next=9;break;}_context2.next=8;return validationImg(fromdata.get(\"photo\"));case 8:photo=_context2.sent;case 9:name=validateName(fromdata.get(keys.name));email=validateEmail(fromdata.get(keys.email));role=fromdata.get(keys.position_id)!==null?validateId(fromdata.get(keys.position_id)):false;phone=fromdata.get(\"phone\").match(/^[\\+]{0,1}380([0-9]{9})$/)!=null;if(!role){document.querySelector(\".registration_fieldset .input_error\").classList.remove(\"hide\");document.querySelector(\".registration_fieldset .input_error\").innerText=\"Please select position\";document.querySelector(\".registration_fieldset\").classList.add(\"error\");}if(!name){document.querySelector(\".input[name='\"+keys.name+\"'] ~ .input_error\").classList.remove(\"hide\");document.querySelector(\".input[name='\"+keys.name+\"'] ~ .input_error\").innerText=\"Please fill field name\";document.querySelector(\".input[name='\"+keys.name+\"']\").classList.add(\"error\");}if(!email){document.querySelector(\".input[name='\"+keys.email+\"'] ~ .input_error\").classList.remove(\"hide\");document.querySelector(\".input[name='\"+keys.email+\"'] ~ .input_error\").innerText=\"Please fill field email\";document.querySelector(\".input[name='\"+keys.email+\"']\").classList.add(\"error\");}if(!photo){document.querySelector(\".file_error\").classList.remove(\"hide\");document.querySelector(\".file_error\").innerText=\"Please choose file\";document.querySelector(\".file_input\").classList.add(\"error\");}if(!phone){document.querySelector(\".input[name='\"+keys.phone+\"'] ~ .input_error\").classList.remove(\"hide\");document.querySelector(\".input[name='\"+keys.phone+\"'] ~ .input_helper\").classList.add(\"hide\");document.querySelector(\".input[name='\"+keys.phone+\"'] ~ .input_error\").innerText=\"Please fill field phone\";document.querySelector(\".input[name='\"+keys.phone+\"']\").classList.add(\"error\");}return _context2.abrupt(\"return\",{succeed:phone&&name&&email&&role&&photo&&true,detail:{photo:photo,name:name,email:email,role:role,phone:phone}});case 19:case\"end\":return _context2.stop();}}},_callee2);}));return _validateForm.apply(this,arguments);}","map":{"version":3,"names":["validateEmail","Email","match","validateName","text","length","validateId","id","getDimention","uri","Promise","resolve","img","Image","onload","height","width","src","validationImg","file","fileAsDataURL","window","URL","createObjectURL","propertis","size","status","valid","error","push","validateForm","fromdata","keys","undefined","succeed","photo","get","name","email","role","position_id","phone","document","querySelector","classList","remove","innerText","add","detail"],"sources":["/Users/antonrybalkin/Projects/testtask/src/components/validate.js"],"sourcesContent":["/**\n * func what validate email\n * @param {string} Email text\n * @returns {Boolean} status validtion \n */\nexport function validateEmail(Email) {\n    return Email.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/) != null\n}\n/**\n * func what validate name\n * @param {string} text  name\n * @returns {Boolean} status validtion\n */\nexport function validateName(text) {\n    return text.length >= 2 && text.length <= 60\n}\n/**\n * func what validate position id \n * @param {Int16Array} id  position id \n * @returns {Boolean} status validtion\n */\nexport function validateId(id) {\n    return id < 10&&id > 0\n}\n/**\n * func what get dimention from file\n * @param {URL} uri file\n * @returns {Object} with height and width\n */\nconst getDimention = uri => new Promise(resolve => {\n    const img = new Image()\n    img.onload = () => {\n        resolve({height: img.height, width: img.width})\n    }\n    img.src = uri\n})\n/**\n * func what validate img \n * @param {File} file file\n * @returns {Boolean} status\n */\nexport async function validationImg(file) {\n    const fileAsDataURL = window\n        .URL\n        .createObjectURL(file);\n    const propertis = await getDimention(fileAsDataURL);\n    let size = file.size / 10000000 < 5;\n    let status = {\n        valid: false,\n        error: []\n    }\n    if (!size) {\n        status\n            .error\n            .push(\"Size file is too big, img must be up to 5 Mb\")\n    }\n\n    if (propertis.height < 70 && propertis.width < 70) {\n        status\n            .error\n            .push(\"Too low dimention, img should be 70x70 or larger\")\n    }\n\n    status.valid = size == true && propertis.height >= 70 && propertis.width >= 70\n\n    return status;\n\n}\n/**\n * func what validate form\n * @param {FormData} fromdata fromdata\n * @param {Object} keys object with key for set error\n * @returns {Object} object with status result\n */\nexport async function validateForm(fromdata, keys) {\n\n    if (keys == undefined) {\n        return {succeed: false, error: \"No data keys\"}\n    }\n    if (fromdata == null) {\n        return {succeed: false, error: \"No data\"}\n    }\n\n    let photo = false;\n    if (keys.photo != undefined && fromdata.get(keys.photo).size != 0) {\n        photo = await validationImg(fromdata.get(\"photo\"));\n    }\n    const name = validateName(fromdata.get(keys.name));\n    const email = validateEmail(fromdata.get(keys.email));\n    const role = fromdata.get(keys.position_id) !== null\n        ? validateId(fromdata.get(keys.position_id))\n        : false;\n    const phone = fromdata\n        .get(\"phone\")\n        .match(/^[\\+]{0,1}380([0-9]{9})$/) != null;\n\n    if (!role) {\n        document\n            .querySelector(\".registration_fieldset .input_error\")\n            .classList\n            .remove(\"hide\");\n        document\n            .querySelector(\".registration_fieldset .input_error\")\n            .innerText = \"Please select position\"\n        document\n            .querySelector(\".registration_fieldset\")\n            .classList\n            .add(\"error\")\n    }\n    if (!name) {\n        document\n            .querySelector(\".input[name='\" + keys.name + \"'] ~ .input_error\")\n            .classList\n            .remove(\"hide\");\n        document\n            .querySelector(\".input[name='\" + keys.name + \"'] ~ .input_error\")\n            .innerText = \"Please fill field name\"\n        document\n            .querySelector(\".input[name='\" + keys.name + \"']\")\n            .classList\n            .add(\"error\")\n    }\n    if (!email) {\n        document\n            .querySelector(\".input[name='\" + keys.email + \"'] ~ .input_error\")\n            .classList\n            .remove(\"hide\");\n        document\n            .querySelector(\".input[name='\" + keys.email + \"'] ~ .input_error\")\n            .innerText = \"Please fill field email\"\n        document\n            .querySelector(\".input[name='\" + keys.email + \"']\")\n            .classList\n            .add(\"error\")\n    }\n    if (!photo) {\n        document\n            .querySelector(\".file_error\")\n            .classList\n            .remove(\"hide\");\n        document\n            .querySelector(\".file_error\")\n            .innerText = \"Please choose file\"\n        document\n            .querySelector(\".file_input\")\n            .classList\n            .add(\"error\")\n    }\n    if (!phone) {\n        document\n            .querySelector(\".input[name='\" + keys.phone + \"'] ~ .input_error\")\n            .classList\n            .remove(\"hide\");\n        document\n            .querySelector(\".input[name='\" + keys.phone + \"'] ~ .input_helper\")\n            .classList\n            .add(\"hide\");\n        document\n            .querySelector(\".input[name='\" + keys.phone + \"'] ~ .input_error\")\n            .innerText = \"Please fill field phone\"\n        document\n            .querySelector(\".input[name='\" + keys.phone + \"']\")\n            .classList\n            .add(\"error\")\n    }\n\n    return {\n        succeed: phone && name && email && role && photo && true,\n        detail: {\n            photo: photo,\n            name: name,\n            email: email,\n            role: role,\n            phone: phone\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}